(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{61:(e,t,l)=>{"use strict";l.d(t,{SoundProvider:()=>n,f:()=>i});var r=l(2115);let a={dice:"/dice.mp3",move:"/move.mp3",win:"/win.mp3",click:"/click.mp3",background:"/background music.mp3",start:"/start.mp3"},s=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[l,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(.5),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("ludoMuted");null!==e&&n(JSON.parse(e));let t=localStorage.getItem("ludoVolume");null!==t&&o(Number(t))},[]),(0,r.useEffect)(()=>{localStorage.setItem("ludoVolume",String(i)),c.current&&(c.current.volume=i)},[i]);let d=(0,r.useCallback)(()=>{if(!l){if(!c.current)try{c.current=new Audio(a.background),c.current.loop=!0,c.current.volume=i}catch(e){console.error("Could not create background audio element",e);return}c.current.paused&&c.current.play().catch(e=>{console.log("Browser prevented audio from playing automatically. Waiting for user interaction.")})}},[l,i]),u=(0,r.useCallback)(()=>{c.current&&!c.current.paused&&c.current.pause()},[]),m=(0,r.useCallback)(()=>{let e=!l;n(e),localStorage.setItem("ludoMuted",JSON.stringify(e)),e?u():d()},[l,d,u]);(0,r.useEffect)(()=>{let e=()=>{l||d(),window.removeEventListener("click",e),window.removeEventListener("keydown",e)};return window.addEventListener("click",e),window.addEventListener("keydown",e),()=>{window.removeEventListener("click",e),window.removeEventListener("keydown",e)}},[l,d]);let f=(0,r.useCallback)(e=>{if(!l)try{let t=new Audio(a[e]);t.volume=i,t.play().catch(t=>console.error("Error playing sound: ".concat(e),t))}catch(e){console.error("Could not play sound",e)}},[l,i]);return r.createElement(s.Provider,{value:{isMuted:l,toggleMute:m,playSound:f,playBackgroundMusic:d,stopBackgroundMusic:u,setVolume:o,volume:i}},t)},i=()=>{let e=(0,r.useContext)(s);if(void 0===e)throw Error("useSound must be used within a SoundProvider");return e}},285:(e,t,l)=>{"use strict";l.d(t,{$:()=>c});var r=l(5155),a=l(2115),s=l(9708),n=l(2085),i=l(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:l,variant:a,size:n,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:a,size:n,className:l})),ref:t,...d})});c.displayName="Button"},2707:(e,t,l)=>{Promise.resolve().then(l.bind(l,7912))},4229:(e,t,l)=>{"use strict";l.d(t,{h:()=>r,n:()=>a});let r={red:{name:"Chhota Bheem",image:"/chhota_bheem.png"},green:{name:"Doraemon",image:"/doraemon.png"},blue:{name:"Pikachu",image:"/Pikachu.png"},yellow:{name:"Shinchan",image:"/Shinchan.png"}},a={red:"Chhota Bheem",green:"Doraemon",blue:"Pikachu pokemon",yellow:"Shinchan"}},6695:(e,t,l)=>{"use strict";l.d(t,{Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>d});var r=l(5155),a=l(2115),s=l(9434);let n=a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",l),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",l),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",l),...a})});o.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",l),...a})}).displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",l),...a})});c.displayName="CardContent";let d=a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",l),...a})});d.displayName="CardFooter"},7481:(e,t,l)=>{"use strict";l.d(t,{dj:()=>m});var r=l(2115);let a=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:l}=t;return l?n(l):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===l||void 0===l?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){for(let t of(c=i(c,e),o))t()}function u(e){let{...t}=e,l=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:l});return d({type:"ADD_TOAST",toast:{...t,id:l,open:!0,onOpenChange:e=>{e||r()}}}),{id:l,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:l}})}}function m(){return{...(0,r.useSyncExternalStore)(e=>(o.push(e),()=>{let t=o.indexOf(e);t>-1&&o.splice(t,1)}),()=>c,()=>c),toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},7912:(e,t,l)=>{"use strict";l.d(t,{GameClient:()=>V});var r=l(5155),a=l(4477);let s=(0,a.createServerReference)("406e5d8eb6d5b50b8e14e0cd489372ad83c732fe51",a.callServer,void 0,a.findSourceMapURL,"updateLeaderboard");var n=l(285),i=l(6695),o=l(61),c=l(7481);let d=100/17,u="".concat(1.2*d,"%"),m="".concat(1.7*d,"%"),f=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{top:"".concat((e+.5)*d,"%"),left:"".concat((t+.5)*d,"%"),width:l?m:u,height:l?m:u,transform:"translate(-50%, -50%)"}},h={red:[f(2,2,!0),f(2,5,!0),f(5,2,!0),f(5,5,!0)],green:[f(2,11,!0),f(2,14,!0),f(5,11,!0),f(5,14,!0)],blue:[f(11,2,!0),f(11,5,!0),f(14,2,!0),f(14,5,!0)],yellow:[f(11,11,!0),f(11,14,!0),f(14,11,!0),f(14,14,!0)]},x=[f(7,1),f(7,2),f(7,3),f(7,4),f(7,5),f(7,6),f(6,7),f(5,7),f(4,7),f(3,7),f(2,7),f(1,7),f(0,7),f(0,8),f(0,9),f(1,9),f(2,9),f(3,9),f(4,9),f(5,9),f(6,9),f(7,10),f(7,11),f(7,12),f(7,13),f(7,14),f(7,15),f(7,16),f(8,16),f(9,16),f(9,15),f(9,14),f(9,13),f(9,12),f(9,11),f(9,10),f(10,9),f(11,9),f(12,9),f(13,9),f(14,9),f(15,9),f(16,9),f(16,8),f(16,7),f(15,7),f(14,7),f(13,7),f(12,7),f(11,7),f(10,7),f(9,6),f(9,5),f(9,4),f(9,3),f(9,2),f(9,1),f(9,0),f(8,0),f(7,0)],g={red:[f(8,1),f(8,2),f(8,3),f(8,4),f(8,5),f(8,6)],green:[f(1,8),f(2,8),f(3,8),f(4,8),f(5,8),f(6,8)],yellow:[f(8,15),f(8,14),f(8,13),f(8,12),f(8,11),f(8,10)],blue:[f(15,8),f(14,8),f(13,8),f(12,8),f(11,8),f(10,8)]},p={red:{pathStart:0},green:{pathStart:15},yellow:{pathStart:30},blue:{pathStart:45}},b={red:f(8,7.5),green:f(7.5,8),yellow:f(8,8.5),blue:f(8.5,8)};var v=l(4229),w=l(4532),j=l(5752),y=l(8046),N=l(6438),k=l(7270),B=l(2543),R=l(6766),C=l(6874),S=l.n(C),G=l(2115),Y=l(9137),M=l.n(Y);let T=()=>{let[e,t]=(0,G.useState)([]);return(0,G.useEffect)(()=>{t(Array.from({length:150}).map((e,t)=>({id:t,x:100*Math.random(),y:-10-20*Math.random(),rotation:360*Math.random(),size:10*Math.random()+5,color:"hsl(".concat(360*Math.random(),", 100%, 70%)"),duration:3*Math.random()+2,delay:+Math.random()})))},[]),(0,r.jsxs)("div",{className:"jsx-ab0003bada54de84 fixed inset-0 pointer-events-none z-[100] overflow-hidden",children:[e.map(e=>(0,r.jsx)("div",{style:{left:"".concat(e.x,"vw"),top:"".concat(e.y,"vh"),width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),backgroundColor:e.color,transform:"rotate(".concat(e.rotation,"deg)"),animation:"fall ".concat(e.duration,"s linear ").concat(e.delay,"s forwards")},className:"jsx-ab0003bada54de84 absolute"},e.id)),(0,r.jsx)(M(),{id:"ab0003bada54de84",children:"@-webkit-keyframes fall{to{-webkit-transform:translatey(120vh)rotate(720deg);transform:translatey(120vh)rotate(720deg);opacity:0}}@-moz-keyframes fall{to{-moz-transform:translatey(120vh)rotate(720deg);transform:translatey(120vh)rotate(720deg);opacity:0}}@-o-keyframes fall{to{-o-transform:translatey(120vh)rotate(720deg);transform:translatey(120vh)rotate(720deg);opacity:0}}@keyframes fall{to{-webkit-transform:translatey(120vh)rotate(720deg);-moz-transform:translatey(120vh)rotate(720deg);-o-transform:translatey(120vh)rotate(720deg);transform:translatey(120vh)rotate(720deg);opacity:0}}"})]})};var E=l(462);let A=e=>{let{direction:t,colorClass:l}=e;return(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"w-3/4 h-3/4 ".concat(l," transform ").concat({up:"rotate-[270deg]",right:"rotate-0",down:"rotate-90",left:"rotate-180"}[t]),children:(0,r.jsx)("path",{fill:"currentColor",d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})})},I=()=>{let e=e=>{let{className:t="",children:l}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center border border-black/20 ".concat(t),children:l})},t=e=>{let{bgColor:t}=e;return(0,r.jsxs)("div",{className:"w-full h-full ".concat(t," border-2 border-black grid grid-cols-2 grid-rows-2 gap-2 p-4"),children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-white/50 border border-black/20"})}),(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-white/50 border border-black/20"})}),(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-white/50 border border-black/20"})}),(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-white/50 border border-black/20"})})]})},l=e=>{let{colorClass:t="text-black/50"}=e;return(0,r.jsx)(E.A,{className:"h-3/4 w-3/4 ".concat(t),fill:"currentColor"})},a=[],s=["R R R R R R R . . . G G G G G G G","R R R R R R R . g . G G G G G G G","R R R R R R R . g . G G G G G G G","R R R R R R R . g . G G G G G G G","R R R R R R R . g . G G G G G G G","R R R R R R R . g . G G G G G G G","R R R R R R R . g . G G G G G G G",". . . . . . . C C C . . . . . . .",". r r r r r r C C C y y y y y y .",". . . . . . . C C C . . . . . . .","B B B B B B B . b . Y Y Y Y Y Y Y","B B B B B B B . b . Y Y Y Y Y Y Y","B B B B B B B . b . Y Y Y Y Y Y Y","B B B B B B B . b . Y Y Y Y Y Y Y","B B B B B B B . b . Y Y Y Y Y Y Y","B B B B B B B . b . Y Y Y Y Y Y Y","B B B B B B B . . . Y Y Y Y Y Y Y"].map(e=>e.split(/\s+/)),n={".":"bg-yellow-100",R:"bg-red-500",G:"bg-green-500",B:"bg-blue-500",Y:"bg-yellow-400",r:"bg-red-500",g:"bg-green-500",b:"bg-blue-500",y:"bg-yellow-400"},i={"7-1":{dir:"right",playerChar:"r"},"1-9":{dir:"down",playerChar:"g"},"9-15":{dir:"left",playerChar:"y"},"15-7":{dir:"up",playerChar:"b"}},o={"3-7":"text-red-500","7-13":"text-green-500","13-9":"text-yellow-400","9-3":"text-blue-500"};for(let c=0;c<17;c++)for(let d=0;d<17;d++){let u="".concat(c,"-").concat(d),m=s[c][d];if("R"===m&&c<7&&d<7)0===c&&0===d&&a.push((0,r.jsx)("div",{className:"col-span-7 row-span-7 h-full w-full",children:(0,r.jsx)(t,{bgColor:"bg-red-500"})},u));else if("G"===m&&c<7&&d>9)0===c&&10===d&&a.push((0,r.jsx)("div",{className:"col-span-7 row-span-7 h-full w-full",children:(0,r.jsx)(t,{bgColor:"bg-green-500"})},u));else if("B"===m&&c>9&&d<7)10===c&&0===d&&a.push((0,r.jsx)("div",{className:"col-span-7 row-span-7 h-full w-full",children:(0,r.jsx)(t,{bgColor:"bg-blue-500"})},u));else if("Y"===m&&c>9&&d>9)10===c&&10===d&&a.push((0,r.jsx)("div",{className:"col-span-7 row-span-7 h-full w-full",children:(0,r.jsx)(t,{bgColor:"bg-yellow-400"})},u));else if("C"===m)7===c&&7===d&&a.push((0,r.jsx)("div",{className:"col-start-8 col-span-3 row-start-8 row-span-3",children:(0,r.jsxs)("div",{className:"w-full h-full relative",children:[(0,r.jsx)("div",{style:{clipPath:"polygon(0 0, 100% 0, 50% 50%)"},className:"absolute inset-0 bg-green-500"}),(0,r.jsx)("div",{style:{clipPath:"polygon(100% 0, 100% 100%, 50% 50%)"},className:"absolute inset-0 bg-yellow-400"}),(0,r.jsx)("div",{style:{clipPath:"polygon(0 100%, 100% 100%, 50% 50%)"},className:"absolute inset-0 bg-blue-500"}),(0,r.jsx)("div",{style:{clipPath:"polygon(0 0, 0 100%, 50% 50%)"},className:"absolute inset-0 bg-red-500"})]})},"center"));else{let t=null,s=n[m]||"bg-yellow-100",c=i[u],d=o[u];c?(t=(0,r.jsx)(A,{direction:c.dir,colorClass:"text-white"}),s=n[c.playerChar]):d&&(t=(0,r.jsx)(l,{colorClass:d})),a.push((0,r.jsx)(e,{className:"".concat(s),children:t},u))}}return(0,r.jsx)("div",{className:"relative mx-auto aspect-square w-full max-w-[95vw] rounded-2xl bg-white p-3 shadow-lg sm:p-4 md:max-w-[500px] lg:max-w-[600px] border-4 border-black",children:(0,r.jsx)("div",{className:"grid h-full w-full grid-cols-17 grid-rows-17 gap-px bg-black",children:a})})},_=e=>{let{color:t,isSelectable:l,isSelected:a,onClick:s,characterImage:n,pawn:i,...o}=e;return(0,r.jsx)("div",{className:"relative w-3/4 h-3/4 transition-all duration-300 ease-in-out flex items-center justify-center ".concat(l?"cursor-pointer":""," ").concat(a?"scale-110":""),onClick:l?s:void 0,children:(0,r.jsxs)("div",{className:"relative w-full h-full ".concat(l?"animate-bounce":"animate-bounce-soft"),children:[l&&(0,r.jsx)("div",{className:"absolute -inset-1 rounded-full bg-yellow-400/75 animate-ping"}),(0,r.jsx)(()=>(0,r.jsxs)("svg",{viewBox:"0 0 32 48",className:"w-full h-full drop-shadow-lg",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M16 0C24.8366 0 32 7.16344 32 16C32 26.5 16 48 16 48C16 48 0 26.5 0 16C0 7.16344 7.16344 0 16 0Z",fill:t}),(0,r.jsx)("path",{d:"M16 48L12 42L20 42L16 48Z",fill:t,stroke:"black",strokeWidth:"0.5",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M25 8C25 8 19.5 13 19.5 20",stroke:"white",strokeOpacity:"0.7",strokeWidth:"2",strokeLinecap:"round"})]}),{}),n&&(0,r.jsx)("div",{className:"absolute flex items-center justify-center w-full h-full ".concat((null==i?void 0:i.position)===-1?"scale-150":""," top-0 left-0"),children:(0,r.jsx)(R.default,{src:n,alt:"character icon",width:40,height:40,className:"rounded-full object-contain bg-white/50 border border-black/20 p-px",...o})})]})})},O={red:"#f87171",green:"#4ade80",blue:"#60a5fa",yellow:"#facc15"},D=[0,8,15,23,30,38,45,53],L=e=>{let{value:t}=e,l=()=>(0,r.jsx)("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-black rounded-full"});return(0,r.jsxs)("div",{className:"".concat("w-14 h-14 sm:w-16 sm:h-16 border-2 rounded-lg p-2 bg-white shadow-inner flex"," ").concat({1:"justify-center items-center",2:"justify-between",3:"justify-between",4:"justify-between",5:"justify-between",6:"justify-between"}[t]),children:[1===t&&(0,r.jsx)(l,{}),2===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"self-start",children:(0,r.jsx)(l,{})}),(0,r.jsx)("div",{className:"self-end",children:(0,r.jsx)(l,{})})]}),3===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"self-start",children:(0,r.jsx)(l,{})}),(0,r.jsx)("div",{className:"self-center",children:(0,r.jsx)(l,{})}),(0,r.jsx)("div",{className:"self-end",children:(0,r.jsx)(l,{})})]}),4===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,r.jsx)(l,{}),(0,r.jsx)(l,{})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,r.jsx)(l,{}),(0,r.jsx)(l,{})]})]}),5===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,r.jsx)(l,{}),(0,r.jsx)(l,{})]}),(0,r.jsx)("div",{className:"flex flex-col justify-center",children:(0,r.jsx)(l,{})}),(0,r.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,r.jsx)(l,{}),(0,r.jsx)(l,{})]})]}),6===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,r.jsx)(l,{}),(0,r.jsx)(l,{}),(0,r.jsx)(l,{})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,r.jsx)(l,{}),(0,r.jsx)(l,{}),(0,r.jsx)(l,{})]})]})]})},P=()=>(0,r.jsx)("div",{className:"text-3xl border-2 rounded-lg p-2 w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center bg-gray-200",children:(0,r.jsx)(j.A,{size:32})}),z=e=>{let{op:t}=e,l={"+":(0,r.jsx)(y.A,{size:28}),"-":(0,r.jsx)(N.A,{size:28}),Max:"Max",Min:"Min"};return(0,r.jsx)("div",{className:"text-2xl sm:text-3xl font-bold border-2 rounded-lg p-2 bg-background text-foreground shadow-inner w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center",children:l[t]})},F=()=>(0,r.jsx)("div",{className:"text-3xl border-2 rounded-lg p-2 w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center bg-gray-200",children:(0,r.jsx)(k.A,{size:32})}),V=e=>{let{humanColors:t}=e,[l,a]=(0,G.useState)([]),[d,u]=(0,G.useState)(0),[m,f]=(0,G.useState)(null),[y,N]=(0,G.useState)("rolling"),[k,C]=(0,G.useState)(null),[Y,M]=(0,G.useState)(null),[E,A]=(0,G.useState)(null),{playSound:V}=(0,o.f)(),[W,Z]=(0,G.useState)(null),{toast:$}=(0,c.dj)(),[H,U]=(0,G.useState)(null);(0,G.useEffect)(()=>{let e=localStorage.getItem("ludoPlayerName")||"Player 1",l=t.length,r=["red","green","blue","yellow"],s=[];if(1===l){let e=t[0];s.push({color:e,isBot:!1});let l=r.indexOf(e),a=r[(l+1)%r.length];s.push({color:a,isBot:!0})}else s=t.map(e=>({color:e,isBot:!1}));a(s.map((l,r)=>{let a=!l.isBot&&l.color===t[0],s=v.h[l.color].name;return{id:l.color,name:a?e:s,pawns:Array.from({length:4},(e,t)=>({id:t+1,position:-1})),isBot:l.isBot,characterName:s,characterImage:v.h[l.color].image}}))},[t]);let q=l[d],J=(0,G.useCallback)(async e=>{(await s(e)).error&&$({title:"Leaderboard Error",description:"Could not save game results. Make sure Firebase is configured correctly in .env.local.",variant:"destructive",duration:8e3})},[$]),X=(0,G.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=e.find(e=>e.pawns.every(e=>66===e.position));if(t){C(t),N("game-over"),V("win"),J(t);return}u(e=>(e+1)%l.length),N("rolling"),f(null),M(null),A(null),Z(null)},[l,V,J]),Q=(0,G.useCallback)((e,t)=>66!==e.position&&(-1===e.position?6===t:!(e.position+t>66)),[]),K=(0,G.useCallback)((e,t)=>{let r=l[d].pawns.find(e=>e.id===t).position,a=[];if(-1===r&&6===e)a.push(0);else for(let t=1;t<=e;t++){let e=r+t;if(e>66)break;a.push(e)}a.length>0?(N("moving"),U({pawnId:t,playerIndex:d,path:a,totalSteps:a.length})):X()},[l,d,X]);(0,G.useEffect)(()=>{let e;if("moving"===y&&H){if(0===H.path.length){let t=(0,w.jM)(l,e=>{let t=e[H.playerIndex],l=t.pawns.find(e=>e.id===H.pawnId).position;if(l>=0&&l<60){let r=(p[t.id].pathStart+l)%60;D.includes(r)||e.forEach(e=>{if(e.id!==t.id){let t=p[e.id];e.pawns.forEach(e=>{e.position>=0&&e.position<60&&(t.pathStart+e.position)%60===r&&(e.position=-1)})}})}});e=setTimeout(()=>{a(t),U(null),X(t)},300)}else e=setTimeout(()=>{V("move"),a((0,w.jM)(e=>{let t=e[H.playerIndex].pawns.find(e=>e.id===H.pawnId);-1===t.position&&0===H.path[0]?t.position=0:t.position=H.path[0]})),U((0,w.jM)(e=>{e&&e.path.shift()}))},300);return()=>clearTimeout(e)}},[y,H,l,X,V]);let ee=(0,G.useCallback)(e=>{let t;if(V("dice"),e.pawns.some(e=>-1===e.position)&&.25>Math.random()){if(Math.random()>.5){let e=[[1,5],[2,4],[3,3]],[t,l]=e[Math.floor(Math.random()*e.length)];f([t,"+",l])}else f([6,"Max",Math.floor(6*Math.random())+1]);return 6}let l=Math.floor(6*Math.random())+1,r=["+","-","Max","Min"],a=r[Math.floor(Math.random()*r.length)],s=Math.floor(6*Math.random())+1;switch(f([l,a,s]),a){case"+":t=l+s;break;case"-":t=Math.abs(l-s);break;case"Max":t=Math.max(l,s);break;case"Min":t=Math.min(l,s);break;default:t=0}return t},[V]),et=e=>{"selecting"===y&&(null==q||!q.isBot)&&Y&&Q(e,Y)&&(V("click"),"function"==typeof window.navigator.vibrate&&window.navigator.vibrate(80),A(e.id),K(Y,e.id))},el=(0,G.useCallback)(()=>{"rolling"===y&&(null==q?void 0:q.isBot)&&(Z("".concat(q.characterName," is thinking...")),setTimeout(()=>{let e=ee(q);if(Z("".concat(q.characterName," (Bot) rolled for ").concat(e," steps")),0===e)return void setTimeout(()=>X(),1200);let t=q.pawns.filter(t=>Q(t,e));if(0===t.length)return void setTimeout(()=>X(),1200);let l=null,r=t.filter(e=>-1===e.position);(l=6===e&&r.length>0?r[0]:t.filter(e=>-1!==e.position).sort((e,t)=>t.position-e.position)[0]||null)?(M(e),setTimeout(()=>{K(e,l.id)},800)):setTimeout(()=>X(),1200)},1500))},[y,q,Q,X,ee,K]);return((0,G.useEffect)(()=>{if("rolling"===y&&(null==q?void 0:q.isBot)&&!k){let e=setTimeout(()=>{el()},1500);return()=>clearTimeout(e)}},[y,q,k,el]),0!==l.length&&q)?(0,r.jsxs)("div",{className:"relative flex flex-col md:flex-row items-center justify-center p-2 sm:p-4 gap-4 sm:gap-6 w-full max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,r.jsx)(S(),{href:"/",passHref:!0,children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"rounded-full bg-white/50 text-white hover:bg-white/70 hover:text-black",children:(0,r.jsx)(B.A,{className:"h-6 w-6 sm:h-8 sm:w-8"})})})}),k&&(0,r.jsx)(T,{}),(0,r.jsxs)("div",{className:"relative w-full max-w-[95vw] sm:max-w-md md:max-w-xl aspect-square",children:[(0,r.jsx)(I,{}),l.map(e=>e.pawns.map(t=>{let l=e.id===q.id,a="selecting"===y&&l&&!q.isBot&&null!==Y&&Q(t,Y),s=t.id===E&&l;return(0,r.jsx)("div",{className:"absolute transition-all duration-300 ease-in-out flex items-center justify-center",style:function(e,t){var l,r;let a;if(-1===t.position)a=h[e.id][t.id-1];else if(66===t.position)a=b[e.id];else if(t.position>59){let r=t.position-60;a=null!=(l=g[e.id][r])?l:{display:"none"}}else a=t.position>=0&&t.position<60&&null!=(r=x[(p[e.id].pathStart+t.position)%60])?r:{display:"none"};return{...a,transform:"translate(-50%, -50%)"}}(e,t),children:(0,r.jsx)(_,{color:O[e.id],isSelectable:a,isSelected:s,onClick:()=>et(t),characterImage:e.characterImage,"data-ai-hint":v.n[e.id]})},"".concat(e.id,"-").concat(t.id))}))]}),(0,r.jsx)("div",{className:"w-full md:w-auto flex flex-col items-center gap-4",children:(0,r.jsxs)(i.Zp,{className:"p-4 rounded-4xl shadow-lg w-full max-w-md flex flex-col items-center gap-4 bg-white/10 backdrop-blur-sm border border-white/20",children:[(0,r.jsxs)("div",{className:"w-full p-2 rounded-lg flex items-center gap-3 \n                          ".concat((null==k?void 0:k.id)==="red"||!k&&"red"===q.id?"bg-red-400":"","\n                          ").concat((null==k?void 0:k.id)==="green"||!k&&"green"===q.id?"bg-green-400":"","\n                          ").concat((null==k?void 0:k.id)==="blue"||!k&&"blue"===q.id?"bg-blue-400":"","\n                          ").concat((null==k?void 0:k.id)!=="yellow"&&(k||"yellow"!==q.id)?"":"bg-yellow-400","\n                        "),children:[(0,r.jsx)(R.default,{src:(null==k?void 0:k.characterImage)||q.characterImage,alt:(null==k?void 0:k.characterName)||q.characterName,width:48,height:48,className:"rounded-full bg-white/30 border-2 border-white/50","data-ai-hint":v.n[(null==k?void 0:k.id)||q.id]}),(0,r.jsxs)("div",{className:"flex-grow text-left",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white truncate",children:k?"".concat(k.name," Wins!"):q.isBot?"".concat(q.characterName,"'s Turn"):"".concat(q.name,"'s Turn")}),(0,r.jsx)("p",{className:"text-sm text-white/90",children:(()=>{switch(y){case"rolling":return q.isBot?"".concat(q.characterName," is Rolling..."):"Roll Your Dice!";case"selecting":return"Select a Pawn to Move";case"moving":return"Moving...";case"game-over":return"Game Over!";default:return"Roll Dice"}})()})]})]}),k?(0,r.jsxs)("div",{className:"text-center text-white flex-grow flex flex-col justify-center items-center h-[180px]",children:[(0,r.jsx)("p",{className:"text-4xl",children:"\uD83C\uDFC6"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"Congratulations!"}),(0,r.jsx)(S(),{href:"/",passHref:!0,children:(0,r.jsx)(n.$,{className:"mt-4",children:"Play Again"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex flex-col items-center justify-center gap-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 sm:gap-4",children:[m?(0,r.jsx)(L,{value:m[0]}):(0,r.jsx)(P,{}),m?(0,r.jsx)(z,{op:m[1]}):(0,r.jsx)(F,{}),m?(0,r.jsx)(L,{value:m[2]}):(0,r.jsx)(P,{})]})}),(0,r.jsxs)(n.$,{onClick:()=>{if("rolling"!==y||(null==q?void 0:q.isBot))return;let e=ee(q);if(Z("You rolled for ".concat(e," steps!")),0===e){Z("No move! Result is 0, skipping turn."),setTimeout(()=>X(),1200);return}if(0===q.pawns.filter(t=>Q(t,e)).length){Z("No valid moves! Cannot move ".concat(e," steps. Skipping turn.")),setTimeout(()=>X(),1200);return}M(e),N("selecting")},disabled:"rolling"!==y||q.isBot,className:"w-full h-14 sm:h-16 text-xl sm:text-2xl rounded-3xl shadow-lg",children:[(0,r.jsx)(j.A,{className:"mr-2 h-6 w-6 sm:h-8 sm:h-8"}),"Roll Dice"]}),(0,r.jsx)("div",{className:"h-12 mt-1 text-center text-white font-semibold flex items-center justify-center",children:W&&(0,r.jsx)("p",{className:"animate-in fade-in-0",children:W})})]})]})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-indigo-950 via-blue-900 to-indigo-950",children:(0,r.jsx)("p",{className:"text-white text-xl",children:"Loading Game..."})})}},9434:(e,t,l)=>{"use strict";l.d(t,{cn:()=>s});var r=l(2596),a=l(9688);function s(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[668,874,627,903,441,684,358],()=>t(2707)),_N_E=e.O()}]);